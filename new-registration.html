<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Summer Camp 2024 Registration</title>
    <style>
        .popup {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.5);
        }
        .hidden {
            display: none;
        }
        .error-message {
            color: red;
        }
        /* Your additional CSS styles here */
    </style>
</head>
<body>
    <button id="backButton" onclick="window.location.href='index.html'" style="border: none; background: none;">
        <img src="back button.svg" alt="Back" style="height: 48px;">
    </button>
    <h1 style="text-align: center;">Summer Camp 2024 Registration</h1>
    <img src="logo.png" alt="Logo" style="display: block; margin: 0 auto; width: 100px;">
    <div style="color: blue; text-align: left;">** All Extra-Curricular Activities Included at no additional charge</div>
    <form>
        <!-- Registration fields -->
        <label for="childName">Child's Name <span style="color: red;">*</span></label>
        <input type="text" id="childName" name="childName" required>
        <label for="dob">Date of Birth <span style="color: red;">*</span></label>
        <input type="text" id="dob" name="dob" placeholder="MM/DD/YYYY" required>
        <label for="grade">Grade (Next School Year) <span style="color: red;">*</span></label>
        <select id="grade" name="grade" required>
            <option value="TK">TK</option>
            <option value="KG">KG</option>
            <option value="1st">1st</option>
            <option value="2nd">2nd</option>
            <option value="3rd">3rd</option>
            <option value="4th">4th</option>
            <option value="5th">5th</option>
            <option value="6th">6th</option>
        </select>
        <br>
        <label for="parent1Name">Parent 1 Name <span style="color: red;">*</span></label>
        <input type="text" id="parent1Name" name="parent1Name" required>
        <label for="parent1Phone">Parent 1 Phone <span style="color: red;">*</span></label>
        <input type="text" id="parent1Phone" name="parent1Phone" pattern="\d{10}" required>
        <label for="parent1Email">Parent 1 Email <span style="color: red;">*</span></label>
        <input type="email" id="parent1Email" name="parent1Email" required>
        <br>
        <label for="parent2Name">Parent 2 Name <span style="color: red;">*</span></label>
        <input type="text" id="parent2Name" name="parent2Name" required>
        <label for="parent2Phone">Parent 2 Phone <span style="color: red;">*</span></label>
        <input type="text" id="parent2Phone" name="parent2Phone" pattern="\d{10}" required>
        <label for="parent2Email">Parent 2 Email <span style="color: red;">*</span></label>
        <input type="email" id="parent2Email" name="parent2Email" required>
        <br>
        <label for="streetAddress">Street Address <span style="color: red;">*</span></label>
        <input type="text" id="streetAddress" name="streetAddress" required>
        <label for="emergencyContactName">Emergency Contact Name</label>
        <input type="text" id="emergencyContactName" name="emergencyContactName">
        <label for="emergencyContactPhone">Emergency Contact Phone</label>
        <input type="text" id="emergencyContactPhone" name="emergencyContactPhone" pattern="\d{10}">
        <br>
        <label for="physicianName" id="physicianNameLabel" class="hidden">Physician Name <span style="color: red;">*</span></label>
        <input type="text" id="physicianName" name="physicianName" class="hidden">
        <label for="physicianPhone" id="physicianPhoneLabel" class="hidden">Physician Phone <span style="color: red;">*</span></label>
        <input type="text" id="physicianPhone" name="physicianPhone" class="hidden" pattern="\d{10}">
        <br>
        <label for="allergies">Allergies/Special Notes/Dietary Restrictions</label>
        <textarea id="allergies" name="allergies" rows="4" cols="50"></textarea>
        <br><br>
        <table>
            <thead>
                <tr>
                    <th>Weeks</th>
                    <th>5 Day Full ($399)</th>
                    <th>5 Day ½ AM/PM ($329)</th>
                    <th>4 Day Full ($349)</th>
                    <th>4 Day ½ AM/PM ($279)</th>
                    <th>3 Day Full ($299)</th>
                    <th>3 Day ½ AM/PM ($229)</th>
                    <th>2 Day Full ($249)</th>
                    <th>2 Day ½ AM/PM ($189)</th>
                    <th>1 Day Full ($169)</th>
                    <th>1 Day ½ AM/PM ($119)</th>
                    <th>Hourly ($30)</th>
                </tr>
            </thead>
            <tbody>
                <!-- Repeat for each week -->
                <tr>
                    <td>Week of June 3rd</td>
                    <td><input type="checkbox" name="weeks[week1]" value="5 Day Full" onclick="showDaySelection('5 Day Full', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="5 Day ½ AM/PM" onclick="showDaySelection('5 Day ½ AM/PM', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="4 Day Full" onclick="showDaySelection('4 Day Full', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="4 Day ½ AM/PM" onclick="showDaySelection('4 Day ½ AM/PM', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="3 Day Full" onclick="showDaySelection('3 Day Full', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="3 Day ½ AM/PM" onclick="showDaySelection('3 Day ½ AM/PM', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="2 Day Full" onclick="showDaySelection('2 Day Full', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="2 Day ½ AM/PM" onclick="showDaySelection('2 Day ½ AM/PM', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="1 Day Full" onclick="showDaySelection('1 Day Full', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="1 Day ½ AM/PM" onclick="showDaySelection('1 Day ½ AM/PM', 'Week of June 3rd')"></td>
                    <td><input type="checkbox" name="weeks[week1]" value="Hourly" onclick="showDaySelection('Hourly', 'Week of June 3rd')"></td>
                </tr>
                <!-- Repeat similar rows for each week -->
            </tbody>
        </table>
        <br>
        <div style="color: blue; text-align: left;">*50% of the fee will be deducted for cancellation</div>
        <div style="text-align: right;">HOLIDAYS - June 19th, July 4th</div>
        <br>
        <button type="button" onclick="submitForm()" style="display: block; margin: 0 auto; background-color: blue; color: white; padding: 10px 20px;">Submit</button>
    </form>
    <div style="text-align: center;">
        <div><strong>Current Discounts available until April 30th:</strong></div>
        <div>15% Early Bird - Only applicable for 5-Day Full Programs and if signing up for 4 or more weeks</div>
        <div>10% Early Bird - For all other 5 or 4 day programs and if signing up for 6 or more weeks</div>
        <div>5% Sibling discount (applied to only one child)</div>
    </div>

    <div id="daySelectionPopup" class="popup">
        <div id="popupTitle"></div>
        <div id="daySelection">
            <label><input type="checkbox" name="popupDays" value="Monday" onchange="toggleTiming(this, 'Monday')"> Monday</label>
            <div id="timingMonday" class="hidden timing">
                <label for="startTimeMonday">Start Time:</label>
                <select id="startTimeMonday" name="startTimeMonday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
                <label for="endTimeMonday">End Time:</label>
                <select id="endTimeMonday" name="endTimeMonday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
            </div>
            <br>
            <label><input type="checkbox" name="popupDays" value="Tuesday" onchange="toggleTiming(this, 'Tuesday')"> Tuesday</label>
            <div id="timingTuesday" class="hidden timing">
                <label for="startTimeTuesday">Start Time:</label>
                <select id="startTimeTuesday" name="startTimeTuesday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
                <label for="endTimeTuesday">End Time:</label>
                <select id="endTimeTuesday" name="endTimeTuesday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
            </div>
            <br>
            <label><input type="checkbox" name="popupDays" value="Wednesday" onchange="toggleTiming(this, 'Wednesday')"> Wednesday</label>
            <div id="timingWednesday" class="hidden timing">
                <label for="startTimeWednesday">Start Time:</label>
                <select id="startTimeWednesday" name="startTimeWednesday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
                <label for="endTimeWednesday">End Time:</label>
                <select id="endTimeWednesday" name="endTimeWednesday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
            </div>
            <br>
            <label><input type="checkbox" name="popupDays" value="Thursday" onchange="toggleTiming(this, 'Thursday')"> Thursday</label>
            <div id="timingThursday" class="hidden timing">
                <label for="startTimeThursday">Start Time:</label>
                <select id="startTimeThursday" name="startTimeThursday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
                <label for="endTimeThursday">End Time:</label>
                <select id="endTimeThursday" name="endTimeThursday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
            </div>
            <br>
            <label><input type="checkbox" name="popupDays" value="Friday" onchange="toggleTiming(this, 'Friday')"> Friday</label>
            <div id="timingFriday" class="hidden timing">
                <label for="startTimeFriday">Start Time:</label>
                <select id="startTimeFriday" name="startTimeFriday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
                <label for="endTimeFriday">End Time:</label>
                <select id="endTimeFriday" name="endTimeFriday">
                    <option value="8:30am">8:30am</option>
                    <option value="9:00am">9:00am</option>
                    <!-- Add more options as needed -->
                </select>
            </div>
        </div>
        <br>
        <div id="amPmSelection" class="hidden">
            <label><input type="radio" name="popupAmPm" value="AM"> AM</label>
            <label><input type="radio" name="popupAmPm" value="PM"> PM</label>
        </div>
        <div id="hourlySelection" class="hidden">
            <label for="startTime">Start Time:</label>
            <select id="startTime" name="startTime">
                <option value="8:30am">8:30am</option>
                <option value="9:00am">9:00am</option>
                <!-- Add more options as needed -->
            </select>
            <label for="endTime">End Time:</label>
            <select id="endTime" name="endTime">
                <option value="8:30am">8:30am</option>
                <option value="9:00am">9:00am</option>
                <!-- Add more options as needed -->
            </select>
        </div>
        <br>
        <button onclick="saveDaySelection()">Save</button>
        <button onclick="cancelDaySelection()">Cancel</button>
        <div id="error-message" class="error-message hidden">Please select the required number of days.</div>
    </div>

    <div id="overlay" class="hidden" onclick="closePopup()"></div>

    <script>
        document.getElementById('grade').addEventListener('change', function () {
            const physicianFields = ['physicianName', 'physicianPhone', 'physicianNameLabel', 'physicianPhoneLabel'];
            if (this.value === 'TK' || this.value === 'KG') {
                physicianFields.forEach(field => document.getElementById(field).classList.remove('hidden'));
            } else {
                physicianFields.forEach(field => document.getElementById(field).classList.add('hidden'));
            }
        });

        function showDaySelection(programType, week) {
            const overlay = document.getElementById('overlay');
            const popup = document.getElementById('daySelectionPopup');
            document.getElementById('popupTitle').innerText = programType.includes('Hourly')
                ? `Select Timings for ${week} - ${programType}`
                : `Select Days for ${week} - ${programType}`;

            const isHalfDay = programType.includes('½ AM/PM');
            document.getElementById('amPmSelection').classList.toggle('hidden', !isHalfDay);

            const isHourly = programType.includes('Hourly');
            document.getElementById('hourlySelection').classList.toggle('hidden', !isHourly);

            document.querySelectorAll('#daySelection input[name="popupDays"]').forEach(input => {
                input.disabled = false;
                input.checked = false;
            });
            document.getElementById('daySelection').classList.toggle('hidden', programType.includes('5 Day ½ AM/PM'));

            if (isHourly) {
                document.querySelectorAll('#daySelection input[name="popupDays"]').forEach(input => {
                    input.addEventListener('change', (event) => {
                        const day = event.target.value;
                        const timingDiv = document.getElementById(`timing${day}`);
                        if (event.target.checked) {
                            timingDiv.classList.remove('hidden');
                        } else {
                            timingDiv.classList.add('hidden');
                        }
                    });
                });
            } else {
                const maxDays = programType.includes('4 Day') ? 4 : programType.includes('3 Day') ? 3 : programType.includes('2 Day') ? 2 : programType.includes('1 Day') ? 1 : 5;
                document.querySelectorAll(`#daySelection input[name="popupDays"]:nth-child(n+${maxDays + 1})`).forEach(input => input.disabled = true);
            }

            popup.dataset.programType = programType;
            popup.dataset.week = week;

            overlay.style.display = 'block';
            popup.style.display = 'block';

            const checkboxes = document.querySelectorAll('#daySelection input[name="popupDays"]');
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', () => {
                    const checkedCount = document.querySelectorAll('#daySelection input[name="popupDays"]:checked').length;
                    checkboxes.forEach(cb => {
                        cb.disabled = !cb.checked && checkedCount >= maxDays;
                    });
                });
            });

            // Store the initial state
            popup.dataset.initialChecked = document.querySelector(`input[name^="weeks"][value^="${week}"]`).checked;
        }

        function toggleTiming(checkbox, day) {
            const timingDiv = document.getElementById(`timing${day}`);
            if (checkbox.checked) {
                timingDiv.classList.remove('hidden');
            } else {
                timingDiv.classList.add('hidden');
            }
        }

        function cancelDaySelection() {
            const overlay = document.getElementById('overlay');
            const popup = document.getElementById('daySelectionPopup');
            overlay.style.display = 'none';
            popup.style.display = 'none';

            // Restore the initial state
            const week = popup.dataset.week;
            const initialChecked = popup.dataset.initialChecked === 'true';
            document.querySelector(`input[name^="weeks"][value^="${week}"]`).checked = initialChecked;

            // Hide all timing divs
            document.querySelectorAll('.timing').forEach(div => div.classList.add('hidden'));
        }

        function saveDaySelection() {
            const overlay = document.getElementById('overlay');
            overlay.style.display = 'none';
            const popup = document.getElementById('daySelectionPopup');
            popup.style.display = 'none';

            const week = popup.dataset.week;
            const programType = popup.dataset.programType;

            const selectedDays = Array.from(document.querySelectorAll('#daySelection input[name="popupDays"]:checked')).map(cb => cb.value);
            const selectedAmPm = Array.from(document.querySelectorAll('#amPmSelection input[name="popupAmPm"]:checked')).map(rb => rb.value);

            // Only collect timing data for the hourly program
            const timings = selectedDays.map(day => ({
                day,
                startTime: programType.includes('Hourly') ? document.getElementById(`startTime${day}`).value : null,
                endTime: programType.includes('Hourly') ? document.getElementById(`endTime${day}`).value : null
            }));

            // Store the selected values in a hidden input or some other data structure
            // Here we could store it in a data attribute or some other form

            // Reset the selections
            document.querySelectorAll('#daySelection input[name="popupDays"]').forEach(cb => cb.checked = false);
            document.querySelectorAll('#amPmSelection input[name="popupAmPm"]').forEach(rb => rb.checked = false);
            document.querySelectorAll('.timing').forEach(div => div.classList.add('hidden'));
        }

        function submitForm() {
            // Perform form submission logic
            window.location.href = 'confirmation.html';
        }
    </script>
</body>
</html>
