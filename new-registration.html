<!DOCTYPE html>
<html>
<head>
    <title>Summer Camp 2024 Registration</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: auto;
        }
        .form-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
        }
        .form-group {
            flex: 1;
            margin-right: 10px;
        }
        .form-group:last-child {
            margin-right: 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        textarea {
            width: 100%;
            height: 100px;
        }
        .hidden {
            display: none;
        }
        .popup {
            display: none;
            position: fixed;
            left: 50%;
            top: 50%;
            transform: translate(-50%, -50%);
            padding: 20px;
            border: 1px solid black;
            background: white;
            z-index: 100;
        }
        .overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 50;
        }
    </style>
    <script>
        async function submitForm(event) {
            event.preventDefault();
            const formData = new FormData(document.querySelector('form'));

            const selectedWeeks = [];
            document.querySelectorAll('input[name="weeks"]:checked').forEach(checkbox => {
                selectedWeeks.push(checkbox.value);
            });

            const selectedDays = [];
            document.querySelectorAll('input[name="days"]:checked').forEach(checkbox => {
                selectedDays.push(checkbox.value);
            });

            const data = {
                name: formData.get('name'),
                dob: formData.get('dob'),
                grade: formData.get('grade'),
                parent1Name: formData.get('parent1Name'),
                parent1Phone: formData.get('parent1Phone'),
                parent1Email: formData.get('parent1Email'),
                parent2Name: formData.get('parent2Name'),
                parent2Phone: formData.get('parent2Phone'),
                parent2Email: formData.get('parent2Email'),
                emergencyContactName: formData.get('emergencyContactName'),
                emergencyContactPhone: formData.get('emergencyContactPhone'),
                address: formData.get('address'),
                notes: formData.get('notes'),
                selectedWeeks: selectedWeeks.join(', '),
                selectedDays: selectedDays.join(', '),
                programType: formData.get('programType'),
                halfDayPreference: formData.get('halfDayPreference'),
                tshirt: formData.get('tshirt')
            };

            data.totalCost = calculateTotalCost(data);

            const response = await fetch('https://vuritiridhi.github.io', {
                method: 'POST',
                body: JSON.stringify(data),
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            const result = await response.json();
            alert(result.message);
        }

        function calculateTotalCost(data) {
            let cost = 0;
            const weeks = data.selectedWeeks.split(', ');
            const days = data.selectedDays.split(', ');

            weeks.forEach(week => {
                switch (data.programType) {
                    case '5 Day Full':
                        cost += 399;
                        break;
                    case '5 Day ½ AM/PM':
                        cost += 329;
                        break;
                    case '4 Day Full':
                        cost += 349;
                        break;
                    case '4 Day ½ AM/PM':
                        cost += 279;
                        break;
                    case '3 Day Full':
                        cost += 299;
                        break;
                    case '3 Day ½ AM/PM':
                        cost += 229;
                        break;
                    case '2 Day Full':
                        cost += 249;
                        break;
                    case '2 Day ½ AM/PM':
                        cost += 189;
                        break;
                    case 'Daily Full':
                        cost += 169;
                        break;
                    case 'Daily ½ AM/PM':
                        cost += 119;
                        break;
                    case 'Hourly':
                        cost += 30;
                        break;
                }
            });

            const suppliesFee = Math.min(weeks.length * 10, 60);
            cost += suppliesFee;

            if (days.includes('Friday')) {
                cost += 10;
            }

            return cost;
        }

        function showDaySelection(programType, week) {
            const overlay = document.getElementById('overlay');
            const popup = document.getElementById('daySelectionPopup');
            document.getElementById('popupTitle').innerText = `Select Days for ${week} - ${programType}`;

            const isHalfDay = programType.includes('½ AM/PM');
            document.getElementById('amPmSelection').classList.toggle('hidden', !isHalfDay);

            popup.dataset.programType = programType;
            popup.dataset.week = week;

            overlay.style.display = 'block';
            popup.style.display = 'block';
        }

        function saveDaySelection() {
            const popup = document.getElementById('daySelectionPopup');
            const selectedDays = [];
            document.querySelectorAll('#daySelectionPopup input[name="popupDays"]:checked').forEach(checkbox => {
                selectedDays.push(checkbox.value);
            });

            const amPmPreference = document.querySelector('input[name="popupAmPm"]:checked');
            const isHalfDay = popup.dataset.programType.includes('½ AM/PM');
            const halfDayText = isHalfDay ? ` (${amPmPreference.value} Session)` : '';

            const selectionText = `${popup.dataset.week} - ${popup.dataset.programType}${halfDayText}: ${selectedDays.join(', ')}`;
            alert(`Saved Selection: ${selectionText}`);

            const overlay = document.getElementById('overlay');
            overlay.style.display = 'none';
            popup.style.display = 'none';
        }

        function cancelDaySelection() {
            const overlay = document.getElementById('overlay');
            const popup = document.getElementById('daySelectionPopup');
            overlay.style.display = 'none';
            popup.style.display = 'none';
        }

        document.addEventListener('DOMContentLoaded', () => {
            document.querySelectorAll('input[name="weeks"]').forEach(checkbox => {
                checkbox.addEventListener('change', (event) => {
                    const [week, programType] = event.target.value.split(' - ');
                    if (programType.includes('4 Day') || programType.includes('3 Day') || programType.includes('2 Day') || programType.includes('Daily')) {
                        showDaySelection(programType, week);
                    }
                });
            });
        });
    </script>
</head>
<body>
    <h1>Summer Camp 2024 Registration</h1>
    <form onsubmit="submitForm(event)">
        <div class="form-row">
            <div class="form-group">
                <label for="name">Child's Name:</label>
                <input type="text" id="name" name="name" required>
            </div>
            <div class="form-group">
                <label for="dob">Date of Birth/Age:</label>
                <input type="date" id="dob" name="dob" required>
            </div>
            <div class="form-group">
                <label for="grade">Grade (Next School Year):</label>
                <select id="grade" name="grade" required>
                    <option value="TK">TK</option>
                    <option value="KG">KG</option>
                    <option value="1st">1st</option>
                    <option value="2nd">2nd</option>
                    <option value="3rd">3rd</option>
                    <option value="4th">4th</option>
                    <option value="5th">5th</option>
                    <option value="6th">6th</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="parent1Name">Parent 1 Name:</label>
                <input type="text" id="parent1Name" name="parent1Name" required>
            </div>
            <div class="form-group">
                <label for="parent1Phone">Parent 1 Phone:</label>
                <input type="tel" id="parent1Phone" name="parent1Phone" required>
            </div>
            <div class="form-group">
                <label for="parent1Email">Parent 1 Email:</label>
                <input type="email" id="parent1Email" name="parent1Email" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="parent2Name">Parent 2 Name:</label>
                <input type="text" id="parent2Name" name="parent2Name">
            </div>
            <div class="form-group">
                <label for="parent2Phone">Parent 2 Phone:</label>
                <input type="tel" id="parent2Phone" name="parent2Phone">
            </div>
            <div class="form-group">
                <label for="parent2Email">Parent 2 Email:</label>
                <input type="email" id="parent2Email" name="parent2Email">
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="address">Street Address:</label>
                <input type="text" id="address" name="address" required>
            </div>
            <div class="form-group">
                <label for="emergencyContactName">Emergency Contact Name:</label>
                <input type="text" id="emergencyContactName" name="emergencyContactName" required>
            </div>
            <div class="form-group">
                <label for="emergencyContactPhone">Emergency Contact Phone:</label>
                <input type="tel" id="emergencyContactPhone" name="emergencyContactPhone" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="notes">Allergies/Special Notes/Dietary Restrictions:</label>
                <textarea id="notes" name="notes"></textarea>
            </div>
        </div>

        <table>
            <tr>
                <th>Program Type</th>
                <th>Week of June 3rd</th>
                <th>Week of June 10th</th>
                <th>Week of June 17th</th>
                <th>Week of June 24th</th>
                <th>Week of July 1st</th>
                <th>Week of July 8th</th>
                <th>Week of July 15th</th>
                <th>Week of July 22nd</th>
                <th>Week of July 29th</th>
                <th>Week of August 5th</th>
            </tr>
            <tr>
                <td>5 Day Full ($399)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 5 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 5 Day Full"></td>
            </tr>
            <tr>
                <td>5 Day ½ AM/PM ($329)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 5 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 5 Day ½ AM/PM"></td>
            </tr>
            <tr>
                <td>4 Day Full ($349)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 4 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 4 Day Full"></td>
            </tr>
            <tr>
                <td>4 Day ½ AM/PM ($279)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 4 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 4 Day ½ AM/PM"></td>
            </tr>
            <tr>
                <td>3 Day Full ($299)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 3 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 3 Day Full"></td>
            </tr>
            <tr>
                <td>3 Day ½ AM/PM ($229)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 3 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 3 Day ½ AM/PM"></td>
            </tr>
            <tr>
                <td>2 Day Full ($249)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 2 Day Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 2 Day Full"></td>
            </tr>
            <tr>
                <td>2 Day ½ AM/PM ($189)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - 2 Day ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - 2 Day ½ AM/PM"></td>
            </tr>
            <tr>
                <td>Daily Full ($169)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - Daily Full"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - Daily Full"></td>
            </tr>
            <tr>
                <td>Daily ½ AM/PM ($119)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - Daily ½ AM/PM"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - Daily ½ AM/PM"></td>
            </tr>
            <tr>
                <td>Hourly ($30)</td>
                <td><input type="checkbox" name="weeks" value="Week of June 3rd - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 10th - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 17th - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of June 24th - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 1st - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 8th - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 15th - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 22nd - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of July 29th - Hourly"></td>
                <td><input type="checkbox" name="weeks" value="Week of August 5th - Hourly"></td>
            </tr>
        </table>

        <label for="tshirt">Do you want to purchase a T-shirt? ($10)</label><br>
        <input type="radio" name="tshirt" value="Yes" required> Yes<br>
        <input type="radio" name="tshirt" value="No" required> No<br><br>

        <input type="submit" value="Submit">
    </form>

    <div id="overlay" class="overlay"></div>

    <div id="daySelectionPopup" class="popup">
        <h2 id="popupTitle">Select Days</h2>
        <div>
            <label><input type="checkbox" name="popupDays" value="Monday"> Monday</label><br>
            <label><input type="checkbox" name="popupDays" value="Tuesday"> Tuesday</label><br>
            <label><input type="checkbox" name="popupDays" value="Wednesday"> Wednesday</label><br>
            <label><input type="checkbox" name="popupDays" value="Thursday"> Thursday</label><br>
            <label><input type="checkbox" name="popupDays" value="Friday"> Friday</label><br>
        </div>
        <div id="amPmSelection" class="hidden">
            <label><input type="radio" name="popupAmPm" value="AM"> AM Session</label><br>
            <label><input type="radio" name="popupAmPm" value="PM"> PM Session</label><br>
        </div>
        <button onclick="saveDaySelection()">Save</button>
        <button onclick="cancelDaySelection()">Cancel</button>
    </div>
</body>
</html>
